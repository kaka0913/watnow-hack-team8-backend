# ルート提案システム要件書


「スタート地点から 3 つのスポットを巡る 4 箇所の最適化された散歩ルート」を提案するシステムです。

本システムは、ユーザーの現在地から出発し、テーマに応じた魅力的なスポットを 3 箇所経由して、最適化されたルートを提案します。目的地の有無に関わらず、柔軟で楽しい散歩体験を提案することを目的としています。

## 🎨 テーマ・シナリオ対応

### 🍽️ グルメテーマ (`gourmet`)

#### シナリオ一覧

| シナリオ ID     | 日本語名       | 対象 POI カテゴリ                     | 説明                                         |
| --------------- | -------------- | ------------------------------------- | -------------------------------------------- |
| `cafe_hopping`  | カフェ巡り     | `cafe`, `restaurant`                  | 評価の高いカフェやレストランを中心とした巡回 |
| `bakery_tour`   | ベーカリー巡り | `bakery`, `cafe`, `store`             | ベーカリーを優先的に選択した甘い香りの散歩   |
| `local_gourmet` | 地元グルメ     | `restaurant`, `food`, `meal_takeaway` | 地域の食文化を味わうレストラン・食事処巡り   |
| `sweet_journey` | スイーツ巡り   | `bakery`, `cafe`, `store`             | ベーカリーとカフェを組み合わせたスイーツ体験 |

### 🌿 自然テーマ (`nature`)

#### シナリオ一覧

| シナリオ ID     | 日本語名   | 対象 POI カテゴリ                                | 説明                                             |
| --------------- | ---------- | ------------------------------------------------ | ------------------------------------------------ |
| `park_tour`     | 公園巡り   | `park`, `tourist_attraction`, `establishment`    | 公園を中心とした自然散策ルート                   |
| `riverside`     | 河川敷散歩 | `park`, `natural_feature`, `point_of_interest`   | 河川敷や水辺エリアでの一直線散歩                 |
| `temple_nature` | 寺社と自然 | `place_of_worship`, `park`, `tourist_attraction` | 寺社仏閣と自然スポットを組み合わせた心安らぐ散歩 |

### 🏛️ 歴史テーマ (`history`)

#### シナリオ一覧

| シナリオ ID     | 日本語名       | 対象 POI カテゴリ                                           | 説明                                         |
| --------------- | -------------- | ----------------------------------------------------------- | -------------------------------------------- |
| `temple_shrine` | 寺社仏閣巡り   | `place_of_worship`, `tourist_attraction`                    | 神社仏閣を中心とした歴史散策                 |
| `museum_tour`   | 博物館巡り     | `museum`, `art_gallery`, `tourist_attraction`               | 博物館・美術館を中心とした文化的散歩         |
| `old_town`      | 古い街並み散策 | `tourist_attraction`, `establishment`, `book_store`         | 歴史ある街並みや書店などを巡る文化散歩       |
| `cultural_walk` | 文化的散歩     | `tourist_attraction`, `museum`, `book_store`, `art_gallery` | 文化的スポットをバランス良く組み合わせた散歩 |

### 👻 ホラーテーマ (`horror`)

#### シナリオ一覧

| シナリオ ID     | 日本語名         | 対象 POI カテゴリ                                        | 説明                                               |
| --------------- | ---------------- | -------------------------------------------------------- | -------------------------------------------------- |
| `ghost_tour`    | 心霊スポット巡り | `establishment`, `natural_feature`, `tourist_attraction` | 廃墟や曰く付きの場所を巡るスリリングな散歩         |
| `haunted_ruins` | 廃墟探索         | `establishment`, `tourist_attraction`                     | 廃病院・廃校・廃ホテルなど建造物系ホラースポット   |
| `cursed_nature` | 呪いの自然       | `natural_feature`, `park`, `place_of_worship`             | 呪いの池・森・樹木など自然系ホラースポット         |
| `cemetery_walk` | 墓地・慰霊散歩   | `place_of_worship`, `tourist_attraction`                 | 墓地・慰霊碑・古戦場跡など歴史的ホラースポット     |

### 🎨 アートテーマ (`art`)

#### シナリオ一覧

| シナリオ ID       | 日本語名               | 対象 POI カテゴリ                          | 説明                                         |
| ----------------- | ---------------------- | ------------------------------------------ | -------------------------------------------- |
| `gallery_hopping` | ギャラリー巡り         | `art_gallery`, `museum`, `tourist_attraction` | 美術館・ギャラリーを中心としたアート散歩     |
| `street_art`      | ストリートアート探索   | `tourist_attraction`, `point_of_interest`     | 街中のアート作品や文化的スポットを巡る散歩   |

### 🛍️ ショッピングテーマ (`shopping`)

#### シナリオ一覧

| シナリオ ID        | 日本語名           | 対象 POI カテゴリ                    | 説明                                       |
| ------------------ | ------------------ | ------------------------------------ | ------------------------------------------ |
| `vintage_shopping` | 古着・雑貨巡り     | `store`, `establishment`, `tourist_attraction` | 個性的な古着店や雑貨店を巡るショッピング散歩 |
| `local_market`     | 地元市場探索       | `store`, `food`, `establishment`        | 地元の市場や商店街を巡る文化的ショッピング |

### 💕 デートテーマ (`date`)

#### シナリオ一覧

| シナリオ ID         | 日本語名           | 対象 POI カテゴリ                             | 説明                                         |
| ------------------- | ------------------ | --------------------------------------------- | -------------------------------------------- |
| `romantic_walk`     | ロマンチック散歩   | `restaurant`, `cafe`, `park`, `tourist_attraction` | カフェ・公園・名所を組み合わせたロマンチックなデートコース |
| `confession_course` | 告白大作戦❤️      | `park`, `tourist_attraction`, `cafe`             | 告白に最適な美しいスポットを巡る特別なデートコース |

### 🏃 健康テーマ (`health`)

#### シナリオ一覧

| シナリオ ID      | 日本語名         | 対象 POI カテゴリ                    | 説明                                       |
| ---------------- | ---------------- | ------------------------------------ | ------------------------------------------ |
| `long_distance`  | マゼランコース   | `park`, `natural_feature`, `tourist_attraction` | 長距離ウォーキングを楽しむ健康志向散歩     |
| `morning_jog`    | 朝のジョギング   | `park`, `natural_feature`               | 朝の清々しい空気の中でのジョギングコース   |


## 📊 POI カテゴリ詳細

### 現在対応中の POI カテゴリ

| カテゴリ             | 説明               | 使用テーマ                     |
| -------------------- | ------------------ | ------------------------------ |
| `cafe`               | カフェ・喫茶店     | グルメ、デート                 |
| `restaurant`         | レストラン・食堂   | グルメ、デート                 |
| `bakery`             | ベーカリー・パン屋 | グルメ                         |
| `food`               | 食品関連施設       | グルメ、ショッピング           |
| `meal_takeaway`      | テイクアウト専門店 | グルメ                         |
| `store`              | 商店・販売店       | グルメ、ショッピング           |
| `park`               | 公園・緑地         | 自然、ホラー、デート、健康     |
| `tourist_attraction` | 観光地・名所       | 自然、歴史、ホラー、アート、ショッピング、デート、健康 |
| `establishment`      | 施設・建物         | 自然、歴史、ホラー、ショッピング |
| `natural_feature`    | 自然の地形・特徴   | 自然、ホラー、健康             |
| `point_of_interest`  | 興味深いスポット   | 自然、ホラー、アート           |
| `place_of_worship`   | 宗教施設・寺社     | 自然、歴史、ホラー             |
| `museum`             | 博物館             | 歴史、アート                   |
| `art_gallery`        | 美術館・ギャラリー | 歴史、アート                   |
| `book_store`         | 書店               | 歴史                           |

## 🧰 技術実装状況

### 実装済みテーマ統計

- **実装済みテーマ数**: 8テーマ
- **総シナリオ数**: 26シナリオ
- **使用POIカテゴリ**: 15カテゴリ

| テーマ | シナリオ数 | 主な特徴 |
|--------|------------|----------|
| グルメ | 4 | カフェ・レストラン・ベーカリー中心 |
| 自然 | 3 | 公園・河川敷・寺社と自然 |
| 歴史 | 4 | 博物館・寺社仏閣・古い街並み |
| ホラー | 5 | 心霊スポット・廃墟・都市伝説 |
| アート | 2 | ギャラリー・ストリートアート |
| ショッピング | 2 | 古着雑貨・地元市場 |
| デート | 2 | ロマンチック・告白スポット |
| 健康 | 2 | 長距離ウォーキング・ジョギング |

### 定数管理

- テーマ・シナリオは `internal/domain/model/constants.go` で一元管理
- 日本語名のマッピングも含めて型安全に管理

### ストラテジーパターン

- 各テーマごとに専用のストラテジークラスで実装
- シナリオごとに異なる POI 選択ロジックを提供
- 目的地の有無に応じた柔軟なルート生成
